# JCat

## Предварительные требования

### Установите docker и docker compose

### Заполните файлы переменных окружения в папке configs 

1) Для клиента в папке /configs/client создайте файл .env (В режиме разработки .env.dev) и заполните по аналогии с файлом .env.example

2) Сделайте по аналогии в папке сервера (/configs/server) и в папке общих конфигов (/configs)

### Для того, чтобы выбранная комплектация отправлялся pdf файлов в Телеграм:

1) Создайте чат бота и полученный токен бота выставьте в папке, где расположены файлы переменного окружения - configs/server/.env (или .env.dev в режиме разработки) 
в поле TELEGRAM_BOT_TOKEN

2) Создайте группу в телеграме, пригласите вашего бота в группу

3) Вам также нужно получить id группы. Для это вы можете пригласить в группу бота IDBot (https://t.me/myidbot) и в группе прописать /getgroupid@myidbot. Полученный id выставьте в файле переменного окружения в поле TELEGRAM_GROUP_ID

4)  Теперь при заполнении формы и при нажатии кнопки "Отправить комплектацию" в группу должны отправлятся pdf файлы.

### Чтобы создать и заполнить бд нужными данными - пропишите в корне проекта (после запуска проекта т.к sail не работает пока проект не запущен):

```bash
cd server && ./sail artisan migrate:refresh --seed --force
```
В режиме разработки замените sail на sail-dev в вышеуказанной команде

### Необходимо устанавить либо сгенерировать переменную окружения API_KEY для сервера (/configs/server). Чтобы сгенерировать (после запуска проекта т.к sail не работает пока проект не запущен):

1) Перейдите в терминале в папку сервера:

```bash
cd server
```

2) Cгенерируйте:

```bash
./sail php artisan key:generate
```

В режиме разработки замените sail на sail-dev в вышеуказанной команде

Если не получается сгенерировать переменную окружения API_KEY через вышеуказанные команды, тогда вы можете попробовать сгенерировать ключ онлайн, введя в гугле что-нибудь такое "laravel generate api key online"




## Запуск 

```bash
./restart-dev.sh # dev mode
```

<br/>

```bash
./restart.sh # prod mode
```

## Инструменты разработки

Для облегчения работы с Mysql в режиме разработки - phpmyadmin доступен в http://localhost:DOCKER_PORT/pma/:

Для облегчения работы с Laravel (https://laravel.com/docs/sail) в docker контейнере:

1) Перейдите в терминале в папку сервера:

```bash
cd server
```

2) Пропишете нужную команду для сервера:

```bash
./sail your_command # например ./sail php artisan make:controller YourController
```

В режиме разработки замените sail на sail-dev в вышеуказанной команде

Также для облегчения работы с Vue (только в режиме разработки) в docker контейнере:

1) Перейдите в терминале в папку клиента:

```bash
cd client
```

2) Пропишете нужную команду для клиента:

```bash
./cli your_command # например ./cli npm i axios
```

